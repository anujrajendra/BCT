"use strict";var REGEX_DATA="xregexp",features={astral:!1,natives:!1},nativ={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},fixed={},regexCache={},patternCache={},tokens=[],defaultScope="default",classScope="class",nativeTokens={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},replacementToken=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,correctExecNpcg=void 0===nativ.exec.call(/()??/,"")[1],hasNativeU=function(){var t=!0;try{new RegExp("","u")}catch(e){t=!1}return t}(),hasNativeY=function(){var t=!0;try{new RegExp("","y")}catch(e){t=!1}return t}(),hasFlagsProp=void 0!==/a/.flags,registeredFlags={g:!0,i:!0,m:!0,u:hasNativeU,y:hasNativeY},toString={}.toString;function augment(e,t,n,r,a){if(e[REGEX_DATA]={captureNames:t},a)return e;if(e.__proto__)e.__proto__=XRegExp.prototype;else for(var i in XRegExp.prototype)e[i]=XRegExp.prototype[i];return e[REGEX_DATA].source=n,e[REGEX_DATA].flags=r&&r.split("").sort().join(""),e}function clipDuplicates(e){return nativ.replace.call(e,/([\s\S])(?=[\s\S]*\1)/g,"")}function copyRegex(e,t){if(!XRegExp.isRegExp(e))throw new TypeError("Type RegExp expected");var n=e[REGEX_DATA]||{},r=getNativeFlags(e),a="",i="",l=null,o=null;return(t=t||{}).removeG&&(i+="g"),t.removeY&&(i+="y"),i&&(r=nativ.replace.call(r,new RegExp("["+i+"]+","g"),"")),t.addG&&(a+="g"),t.addY&&(a+="y"),a&&(r=clipDuplicates(r+a)),t.isInternalOnly||(void 0!==n.source&&(l=n.source),null!=n.flags&&(o=a?clipDuplicates(n.flags+a):n.flags)),e=augment(new RegExp(e.source,r),hasNamedCapture(e)?n.captureNames.slice(0):null,l,o,t.isInternalOnly)}function dec(e){return parseInt(e,16)}function getNativeFlags(e){return hasFlagsProp?e.flags:nativ.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(e))[1]}function hasNamedCapture(e){return!(!e[REGEX_DATA]||!e[REGEX_DATA].captureNames)}function hex(e){return parseInt(e,10).toString(16)}function indexOf(e,t){for(var n=e.length,r=0;r<n;++r)if(e[r]===t)return r;return-1}function isType(e,t){return toString.call(e)==="[object "+t+"]"}function isQuantifierNext(e,t,n){return nativ.test.call(-1<n.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,e.slice(t))}function pad4(e){for(;e.length<4;)e="0"+e;return e}function prepareFlags(e,n){var t;if(clipDuplicates(n)!==n)throw new SyntaxError("Invalid duplicate regex flag "+n);for(e=nativ.replace.call(e,/^\(\?([\w$]+)\)/,function(e,t){if(nativ.test.call(/[gy]/,t))throw new SyntaxError("Cannot use flag g or y in mode modifier "+e);return n=clipDuplicates(n+t),""}),t=0;t<n.length;++t)if(!registeredFlags[n.charAt(t)])throw new SyntaxError("Unknown regex flag "+n.charAt(t));return{pattern:e,flags:n}}function prepareOptions(e){var t={};return isType(e,"String")?(XRegExp.forEach(e,/[^\s,]+/,function(e){t[e]=!0}),t):e}function registerFlag(e){if(!/^[\w$]$/.test(e))throw new Error("Flag must be a single character A-Za-z0-9_$");registeredFlags[e]=!0}function runTokens(e,t,n,r,a){for(var i,l,o=tokens.length,s=e.charAt(n),c=null;o--;)if(!((l=tokens[o]).leadChar&&l.leadChar!==s||l.scope!==r&&"all"!==l.scope||l.flag&&-1===t.indexOf(l.flag))&&(i=XRegExp.exec(e,l.regex,n,"sticky"))){c={matchLength:i[0].length,output:l.handler.call(a,i,r,t),reparse:l.reparse};break}return c}function setAstral(e){features.astral=e}function setNatives(e){RegExp.prototype.exec=(e?fixed:nativ).exec,RegExp.prototype.test=(e?fixed:nativ).test,String.prototype.match=(e?fixed:nativ).match,String.prototype.replace=(e?fixed:nativ).replace,String.prototype.split=(e?fixed:nativ).split,features.natives=e}function toObject(e){if(null==e)throw new TypeError("Cannot convert null or undefined to object");return e}function XRegExp(e,t){var n,r,a,i,l,o={hasNamedCapture:!1,captureNames:[]},s=defaultScope,c="",p=0;if(XRegExp.isRegExp(e)){if(void 0!==t)throw new TypeError("Cannot supply flags when copying a RegExp");return copyRegex(e)}if(e=void 0===e?"":String(e),t=void 0===t?"":String(t),XRegExp.isInstalled("astral")&&-1===t.indexOf("A")&&(t+="A"),patternCache[e]||(patternCache[e]={}),!patternCache[e][t]){for(i=(n=prepareFlags(e,t)).pattern,l=n.flags;p<i.length;){for(;(n=runTokens(i,l,p,s,o))&&n.reparse&&(i=i.slice(0,p)+n.output+i.slice(p+n.matchLength)),n&&n.reparse;);n?(c+=n.output,p+=n.matchLength||1):(c+=r=XRegExp.exec(i,nativeTokens[s],p,"sticky")[0],p+=r.length,"["===r&&s===defaultScope?s=classScope:"]"===r&&s===classScope&&(s=defaultScope))}patternCache[e][t]={pattern:nativ.replace.call(c,/\(\?:\)(?:[*+?]|\{\d+(?:,\d*)?})?\??(?=\(\?:\))|^\(\?:\)(?:[*+?]|\{\d+(?:,\d*)?})?\??|\(\?:\)(?:[*+?]|\{\d+(?:,\d*)?})?\??$/g,""),flags:nativ.replace.call(l,/[^gimuy]+/g,""),captures:o.hasNamedCapture?o.captureNames:null}}return a=patternCache[e][t],augment(new RegExp(a.pattern,a.flags),a.captures,e,t)}XRegExp.prototype=new RegExp,XRegExp.version="3.1.0-dev",XRegExp.addToken=function(e,t,n){var r,a=(n=n||{}).optionalFlags;if(n.flag&&registerFlag(n.flag),a)for(a=nativ.split.call(a,""),r=0;r<a.length;++r)registerFlag(a[r]);tokens.push({regex:copyRegex(e,{addG:!0,addY:hasNativeY,isInternalOnly:!0}),handler:t,scope:n.scope||defaultScope,flag:n.flag,reparse:n.reparse,leadChar:n.leadChar}),XRegExp.cache.flush("patterns")},XRegExp.cache=function(e,t){return regexCache[e]||(regexCache[e]={}),regexCache[e][t]||(regexCache[e][t]=XRegExp(e,t))},XRegExp.cache.flush=function(e){"patterns"===e?patternCache={}:regexCache={}},XRegExp.escape=function(e){return nativ.replace.call(toObject(e),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},XRegExp.exec=function(e,t,n,r){var a="g",i=!1;return(i=hasNativeY&&!!(r||t.sticky&&!1!==r))&&(a+="y"),t[REGEX_DATA]=t[REGEX_DATA]||{},(i=t[REGEX_DATA][a]||(t[REGEX_DATA][a]=copyRegex(t,{addG:!0,addY:i,removeY:!1===r,isInternalOnly:!0}))).lastIndex=n=n||0,e=fixed.exec.call(i,e),r&&e&&e.index!==n&&(e=null),t.global&&(t.lastIndex=e?i.lastIndex:0),e},XRegExp.forEach=function(e,t,n){for(var r,a=0,i=-1;r=XRegExp.exec(e,t,a);)n(r,++i,e,t),a=r.index+(r[0].length||1)},XRegExp.globalize=function(e){return copyRegex(e,{addG:!0})},XRegExp.install=function(e){e=prepareOptions(e),!features.astral&&e.astral&&setAstral(!0),!features.natives&&e.natives&&setNatives(!0)},XRegExp.isInstalled=function(e){return!!features[e]},XRegExp.isRegExp=function(e){return"[object RegExp]"===toString.call(e)},XRegExp.match=function(e,t,n){var r=t.global&&"one"!==n||"all"===n,a=(r?"g":"")+(t.sticky?"y":"")||"noGY";return t[REGEX_DATA]=t[REGEX_DATA]||{},a=t[REGEX_DATA][a]||(t[REGEX_DATA][a]=copyRegex(t,{addG:!!r,addY:!!t.sticky,removeG:"one"===n,isInternalOnly:!0})),a=nativ.match.call(toObject(e),a),t.global&&(t.lastIndex="one"===n&&a?a.index+a[0].length:0),r?a||[]:a&&a[0]},XRegExp.matchChain=function(e,o){return function e(t,n){for(var r=o[n].regex?o[n]:{regex:o[n]},a=[],i=function(e){if(r.backref){if(!(e.hasOwnProperty(r.backref)||+r.backref<e.length))throw new ReferenceError("Backreference to undefined group: "+r.backref);a.push(e[r.backref]||"")}else a.push(e[0])},l=0;l<t.length;++l)XRegExp.forEach(t[l],r.regex,i);return n!==o.length-1&&a.length?e(a,n+1):a}([e],0)},XRegExp.replace=function(e,t,n,r){var a=XRegExp.isRegExp(t),i=t.global&&"one"!==r||"all"===r,l=(i?"g":"")+(t.sticky?"y":"")||"noGY",o=t;return a?(t[REGEX_DATA]=t[REGEX_DATA]||{},o=t[REGEX_DATA][l]||(t[REGEX_DATA][l]=copyRegex(t,{addG:!!i,addY:!!t.sticky,removeG:"one"===r,isInternalOnly:!0}))):i&&(o=new RegExp(XRegExp.escape(String(t)),"g")),n=fixed.replace.call(toObject(e),o,n),a&&t.global&&(t.lastIndex=0),n},XRegExp.replaceEach=function(e,t){for(var n,r=0;r<t.length;++r)n=t[r],e=XRegExp.replace(e,n[0],n[1],n[2]);return e},XRegExp.split=function(e,t,n){return fixed.split.call(toObject(e),t,n)},XRegExp.test=function(e,t,n,r){return!!XRegExp.exec(e,t,n,r)},XRegExp.uninstall=function(e){e=prepareOptions(e),features.astral&&e.astral&&setAstral(!1),features.natives&&e.natives&&setNatives(!1)},XRegExp.union=function(e,t){function n(e,t,n){var r=i[c-a];if(t){if(++c,r)return"(?<"+r+">"}else if(n)return"\\"+(+n+a);return e}var a,i,r,l,o=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,s=[],c=0;if(!isType(e,"Array")||!e.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(l=0;l<e.length;++l)r=e[l],XRegExp.isRegExp(r)?(a=c,i=r[REGEX_DATA]&&r[REGEX_DATA].captureNames||[],s.push(nativ.replace.call(XRegExp(r.source).source,o,n))):s.push(XRegExp.escape(r));return XRegExp(s.join("|"),t)},fixed.exec=function(e){var t,n,r,a=this.lastIndex,i=nativ.exec.apply(this,arguments);if(i){if(!correctExecNpcg&&1<i.length&&-1<indexOf(i,"")&&(n=copyRegex(this,{removeG:!0,isInternalOnly:!0}),nativ.replace.call(String(e).slice(i.index),n,function(){for(var e=arguments.length,t=1;t<e-2;++t)void 0===arguments[t]&&(i[t]=void 0)})),this[REGEX_DATA]&&this[REGEX_DATA].captureNames)for(r=1;r<i.length;++r)(t=this[REGEX_DATA].captureNames[r-1])&&(i[t]=i[r]);this.global&&!i[0].length&&this.lastIndex>i.index&&(this.lastIndex=i.index)}return this.global||(this.lastIndex=a),i},fixed.test=function(e){return!!fixed.exec.call(this,e)},fixed.match=function(e){var t;if(XRegExp.isRegExp(e)){if(e.global)return t=nativ.match.apply(this,arguments),e.lastIndex=0,t}else e=new RegExp(e);return fixed.exec.call(e,toObject(this))},fixed.replace=function(n,r){var e,i,t,a=XRegExp.isRegExp(n);return a?(n[REGEX_DATA]&&(i=n[REGEX_DATA].captureNames),e=n.lastIndex):n+="",t=isType(r,"Function")?nativ.replace.call(String(this),n,function(){var e,t=arguments;if(i)for(t[0]=new String(t[0]),e=0;e<i.length;++e)i[e]&&(t[0][i[e]]=t[e+1]);return a&&n.global&&(n.lastIndex=t[t.length-2]+t[0].length),r.apply(void 0,t)}):nativ.replace.call(null==this?this:String(this),n,function(){var a=arguments;return nativ.replace.call(String(r),replacementToken,function(e,t,n){var r;if(t){if((r=+t)<=a.length-3)return a[r]||"";if((r=i?indexOf(i,t):-1)<0)throw new SyntaxError("Backreference to undefined group "+e);return a[r+1]||""}if("$"===n)return"$";if("&"===n||0==+n)return a[0];if("`"===n)return a[a.length-1].slice(0,a[a.length-2]);if("'"===n)return a[a.length-1].slice(a[a.length-2]+a[0].length);if(n=+n,isNaN(n))throw new SyntaxError("Invalid token "+e);if(n>a.length-3)throw new SyntaxError("Backreference to undefined group "+e);return a[n]||""})}),a&&(n.global?n.lastIndex=0:n.lastIndex=e),t},fixed.split=function(e,t){if(!XRegExp.isRegExp(e))return nativ.split.apply(this,arguments);var n,r=String(this),a=[],i=e.lastIndex,l=0;return t=(void 0===t?-1:t)>>>0,XRegExp.forEach(r,e,function(e){e.index+e[0].length>l&&(a.push(r.slice(l,e.index)),1<e.length&&e.index<r.length&&Array.prototype.push.apply(a,e.slice(1)),n=e[0].length,l=e.index+n)}),l===r.length?nativ.test.call(e,"")&&!n||a.push(""):a.push(r.slice(l)),e.lastIndex=i,a.length>t?a.slice(0,t):a},XRegExp.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===defaultScope)return e[0];throw new SyntaxError("Invalid escape "+e[0])},{scope:"all",leadChar:"\\"}),XRegExp.addToken(/\\u{([\dA-Fa-f]+)}/,function(e,t,n){var r=dec(e[1]);if(1114111<r)throw new SyntaxError("Invalid Unicode code point "+e[0]);if(r<=65535)return"\\u"+pad4(hex(r));if(hasNativeU&&-1<n.indexOf("u"))return e[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")},{scope:"all",leadChar:"\\"}),XRegExp.addToken(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"},{leadChar:"["}),XRegExp.addToken(/\(\?#[^)]*\)/,function(e,t,n){return isQuantifierNext(e.input,e.index+e[0].length,n)?"":"(?:)"},{leadChar:"("}),XRegExp.addToken(/\s+|#.*/,function(e,t,n){return isQuantifierNext(e.input,e.index+e[0].length,n)?"":"(?:)"},{flag:"x"}),XRegExp.addToken(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."}),XRegExp.addToken(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?indexOf(this.captureNames,e[1])+1:+e[1],n=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+e[0]);return"\\"+t+(n===e.input.length||isNaN(e.input.charAt(n))?"":"(?:)")},{leadChar:"\\"}),XRegExp.addToken(/\\(\d+)/,function(e,t){if(!(t===defaultScope&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all",leadChar:"\\"}),XRegExp.addToken(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("Cannot use integer as capture name "+e[0]);if("length"===e[1]||"__proto__"===e[1])throw new SyntaxError("Cannot use reserved word as capture name "+e[0]);if(-1<indexOf(this.captureNames,e[1]))throw new SyntaxError("Cannot use same name for multiple groups "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("},{leadChar:"("}),XRegExp.addToken(/\((?!\?)/,function(e,t,n){return-1<n.indexOf("n")?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n",leadChar:"("}),window.XRegExp=XRegExp;